% !TEX program = lualatex
\documentclass[aspectratio=169,professionalfonts]{beamer}
\input{../preamble.tex}
\usepackage{mwe}

\title[ClústerLab • Día 3]{Gestión del sistema y diagnóstico}
\subtitle{Hostnames, usuarios y sincronización de reloj}
\author{Equipo docente ClústerLab}
\date{8 de agosto de 2025}

\begin{document}

%------------------------------ portada ----------------------------
\begin{frame}[plain]
  \titlepage
\end{frame}

%------------------------------ comprobar hora --------------------
\begin{frame}[fragile]{Verificar fecha y hora}
  \begin{minted}{bash}
$ date
  \end{minted}
  Asegúrate de que la zona horaria mostrada sea la configurada. En caso contrario repite los pasos de \texttt{timedatectl}.
\end{frame}

%------------------------------ bashrc -----------------------------
\begin{frame}[fragile]{Personalizar \texttt{.bashrc}}
  \begin{minted}{bash}
$ sudo -u cluster nano /home/cluster/.bashrc
alias ll='ls -lh --color'
  \end{minted}
  Pide al usuario cerrar sesión y volver a entrar para aplicar los alias.
  \begin{center}
    \includegraphics[width=.4\textwidth]{example-image-c}
  \end{center}
\end{frame}

%------------------------------ hostname test ----------------------
\begin{frame}[fragile]{Comprobar el nuevo hostname}
  \begin{minted}{bash}
$ hostname
$ ping -c1 node01
  \end{minted}
  \begin{itemize}
    \item El comando \texttt{hostname} debe mostrar el nombre elegido.
    \item Si \texttt{/etc/hosts} está correcto, el ping se resolverá localmente.
  \end{itemize}
\end{frame}

%------------------------------ objetivos --------------------------
\begin{frame}[fragile]{Objetivos de la sesión}
  \begin{itemize}
    \item Personalizar el nombre de tu Raspberry Pi y crear un usuario dedicado al clúster.
    \item Configurar la zona horaria y sincronizar la hora del sistema.
    \item Conocer las herramientas básicas de diagnóstico del sistema.
  \end{itemize}
\end{frame}

%------------------------------ agenda -----------------------------
\begin{frame}[fragile]{Agenda (09:00 – 10:30)}
  \begin{enumerate}
    \item Revisión breve y retos del día.
    \item Cambiar \texttt{/etc/hostname} y actualizar \texttt{/etc/hosts}.
    \item Crear usuario \texttt{cluster} y asignar privilegios.
    \item Ajustar la zona horaria con \texttt{timedatectl} y habilitar sincronización.
  \end{enumerate}
\end{frame}

%------------------------------ hostname ---------------------------
\begin{frame}[fragile]{Cambiar el nombre del host}
  Define un nombre único para cada nodo:
  \begin{minted}{bash}
$ sudo hostnamectl set-hostname node01
$ sudo nano /etc/hosts
127.0.1.1    node01
  \end{minted}
  Reinicia la sesión para aplicar cambios:
  \begin{minted}{bash}
$ exec bash
  \end{minted}
  \begin{infobox}
  Utiliza un esquema consistente (\texttt{node01}, \texttt{node02}, …) para simplificar la administración y uso de \texttt{ssh}.
  \end{infobox}
\end{frame}

%------------------------------ usuario cluster ---------------------
\begin{frame}[fragile]{Crear usuario dedicado}
  Para separar tareas de administración y experimentación:
  \begin{minted}{bash}
$ sudo adduser cluster
$ sudo usermod -aG sudo cluster
$ sudo passwd cluster
  \end{minted}
  \begin{itemize}
    \item El grupo \texttt{sudo} otorga privilegios administrativos.
    \item Trabaja habitualmente con el usuario \texttt{cluster} y emplea \texttt{sudo} sólo cuando sea necesario.
  \end{itemize}
\end{frame}

%------------------------------ sincronización ---------------------
\begin{frame}[fragile]{Sincronizar zona horaria y reloj}
  Configura la zona horaria adecuada y activa NTP:
  \begin{minted}{bash}
$ timedatectl list-timezones | grep America/Santiago
$ sudo timedatectl set-timezone America/Santiago
$ sudo timedatectl set-ntp true
$ timedatectl status
  \end{minted}
  \begin{infobox}
  Un reloj sincronizado evita errores en Slurm y certificados SSL. Verifica que la salida muestre \texttt{System clock synchronized: yes}.
  \end{infobox}
  \begin{center}
    \includegraphics[width=.5\textwidth]{example-image}
  \end{center}
\end{frame}

%------------------------------ revisión ---------------------------
\begin{frame}[fragile]{Revisión breve y retos}
  \begin{itemize}
    \item Repasa los conceptos de redes, claves SSH y scripting vistos en los días anteriores.
    \item Propón un reto: automatiza la creación del usuario y la configuración del hostname mediante un script.
    \item Comparte tus soluciones con tus compañeros para mejorar juntos.
  \end{itemize}
\end{frame}

%------------------------------ resumen ----------------------------
\begin{frame}[fragile]{Resumen}
  \begin{itemize}
    \item Asignaste un nombre de host coherente y actualizaste \texttt{/etc/hosts}.
    \item Creaste un usuario dedicado para las prácticas de clúster.
    \item Sincronizaste la zona horaria y habilitaste la sincronización NTP.
  \end{itemize}
  \vspace{0.5em}
  Con estas bases, podemos empezar a monitorear el rendimiento del sistema.
\end{frame}

\end{document}